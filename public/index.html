<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/x-icon" href="assets/FocusFlow.ico" />
    <link rel="stylesheet" href="css/theme.css" />
    <link rel="stylesheet" href="css/past-day.css" />
    <link rel="stylesheet" href="css/main.css" />
    <title>FocusFlow ‚Äì Track Your Progress, Master Your Journey</title>
  </head>
  <body>
    <!-- Main Container -->
    <div class="main-container">
      <!-- Left Column (70%) -->
      <div class="left-column">
        <div class="container">
          <header>
            <div class="header-container">
              <h1 class="site-logo">FocusFlow</h1>
              <div class="header-controls">
                <a href="/blogs.html" class="nav-link blog-link">üìù Blogs</a>

                <a href="/profile.html" class="nav-link profile-link"
                  >üë§ Profile</a
                >
                <div id="syncStatus" class="sync-status">
                  <div class="sync-dot synced"></div>
                  <span>Synced</span>
                </div>
                <div class="header-buttons">
                  <button class="sync-button" id="syncButton">
                    üîÑ Sync Now
                  </button>
                  <!-- <button class="theme-toggle" id="themeToggle" style="display: none;">
                    Switch to Light Theme
                  </button> -->
                </div>
              </div>
            </div>
          </header>

          <!-- NEW: Search Bar -->
          <div class="search-container">
            <input
              type="search"
              id="searchBar"
              class="search-bar"
              autocomplete="off"
              autocorrect="off"
              autocapitalize="off"
              spellcheck="false"
              placeholder="Search by day number (e.g., 1, 2, 3...)"
              aria-label="Search days by number"
            />
            <div class="search-info" id="searchInfo">
              Type a day number to filter. Clear to show all days.
            </div>
          </div>

          <!-- Toast Notification Container -->
          <div class="toast-container" id="toastContainer"></div>

          <!-- Confirmation Dialog -->
          <div class="confirm-dialog" id="confirmDialog">
            <div class="confirm-content">
              <div class="confirm-title" id="confirmTitle">Confirm Action</div>
              <div class="confirm-message" id="confirmMessage">
                Are you sure you want to proceed?
              </div>
              <div class="confirm-buttons">
                <button class="confirm-btn cancel" id="confirmCancel">
                  Cancel
                </button>
                <button class="confirm-btn confirm" id="confirmOk">OK</button>
              </div>
            </div>
          </div>

          <!-- Daily Questions Table -->
          <table>
            <thead>
              <tr>
                <th class="day-cell">Day</th>
                <!-- <th class="questions-cell">Questions</th> -->
                <th class="status-cell" style="display: none"></th>
                <th class="tags-cell" style="display: none"></th>
                <!-- <th class="links-cell">Important Links</th> -->
              </tr>
            </thead>
            <tbody id="tableBody">
              <!-- Rows will be generated by JavaScript -->
            </tbody>
          </table>

          <div class="footer">
            <p>Your progress is automatically saved. Keep coding! üöÄ</p>
            <p>
              If you find this helpful, please give a ‚≠ê on
              <a
                href="https://github.com/anupam6335/Daily-Tracker"
                target="_blank"
                rel="noopener noreferrer"
                >GitHub</a
              >!
            </p>
          </div>
        </div>
      </div>

      <!-- Right Column (30%) -->
      <div class="right-column">
        <!-- Daily Progress -->
        <div class="daily-progress-container">
          <div class="daily-progress-header">
            <h2>Daily Progress</h2>
            <button id="addDayBtn" class="add-day-btn">+ Add New Day</button>
          </div>

          <div id="authSection" class="auth-section" style="display: none">
            <div id="loginForm" class="auth-form">
              <h3 class="auth-title">Please log in to access this page</h3>
              <div class="auth-input-group">
                <input
                  type="text"
                  id="usernameInput"
                  placeholder="Username"
                  class="auth-input"
                />
                <input
                  type="password"
                  id="passwordInput"
                  placeholder="Password"
                  class="auth-input"
                />
                <button id="loginBtn" class="auth-btn primary">Login</button>
                <button id="showRegisterBtn" class="auth-btn secondary">
                  Register
                </button>
              </div>

              <div style="margin-top: 10px; text-align: center">
                <button
                  id="showForgotPasswordBtn"
                  class="auth-btn"
                  style="
                    background: none;
                    border: none;
                    color: var(--link-color);
                    text-decoration: underline;
                    cursor: pointer;
                    font-size: 0.9rem;
                  "
                >
                  Forgot username/password?
                </button>
              </div>
            </div>

            <div id="registerForm" class="auth-form" style="display: none">
              <h3 class="auth-title">Create Account</h3>
              <div class="auth-input-group">
                <input
                  type="text"
                  id="regUsernameInput"
                  placeholder="Username"
                  class="auth-input"
                />
                <input
                  type="password"
                  id="regPasswordInput"
                  placeholder="Password"
                  class="auth-input"
                />
                <input
                  type="password"
                  id="regConfirmPasswordInput"
                  placeholder="Confirm Password"
                  class="auth-input"
                />
                <button id="registerBtn" class="auth-btn primary">
                  Register
                </button>
                <button id="showLoginBtn" class="auth-btn secondary">
                  Back to Login
                </button>
              </div>
            </div>

            <!-- Forgot Password Form -->
            <div
              id="forgotPasswordForm"
              class="auth-form"
              style="display: none"
            >
              <h3 class="auth-title">Reset Password</h3>
              <div class="auth-input-group">
                <input
                  type="text"
                  id="forgotUsernameInput"
                  placeholder="Enter your username"
                  class="auth-input"
                />
                <button id="sendResetCodeBtn" class="auth-btn primary">
                  Send Reset Code
                </button>
                <button id="showLoginFromForgotBtn" class="auth-btn secondary">
                  Back to Login
                </button>
              </div>

              <!-- Reset Code Section (initially hidden) -->
              <div
                id="resetCodeSection"
                style="
                  display: none;
                  margin-top: 15px;
                  padding-top: 15px;
                  border-top: 1px solid var(--border-color);
                "
              >
                <div class="auth-input-group">
                  <input
                    type="text"
                    id="resetCodeInput"
                    placeholder="Enter reset code"
                    class="auth-input"
                  />
                  <input
                    type="password"
                    id="newPasswordInput"
                    placeholder="New password"
                    class="auth-input"
                  />
                  <input
                    type="password"
                    id="confirmNewPasswordInput"
                    placeholder="Confirm new password"
                    class="auth-input"
                  />
                  <button id="resetPasswordBtn" class="auth-btn primary">
                    Reset Password
                  </button>
                </div>
              </div>
            </div>

            <div id="userInfo" class="user-info" style="display: none">
              <div class="user-info-content">
                <span
                  >Logged in as:
                  <a
                    href="/profile.html"
                    style="
                      color: #d0d7de;
                      text-decoration: none;
                      text-transform: uppercase;
                    "
                    ><strong id="currentUsername"></strong></a
                ></span>
                <button id="logoutBtn" class="auth-btn secondary">
                  Logout
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Consistency Map -->
        <div class="activity-tracker-container">
          <div class="activity-tracker-header">
            <h2>Progress Analytics</h2>
            <span class="activity-tracker-subtitle" id="activityStartDate">
              Your journey started on 25-09-2025 (Day 1)
              <!-- This will be updated dynamically -->
            </span>
          </div>

          <!-- Analytics Dashboard -->
          <div class="analytics-dashboard">
            <div class="metrics-grid">
              <div class="metric-card">
                <div class="metric-value" id="currentStreak">0</div>
                <div class="metric-label">Current Streak</div>
                <div class="metric-subtitle">days in a row</div>
              </div>
              <div class="metric-card">
                <div class="metric-value" id="totalSolved">0</div>
                <div class="metric-label">Total Solved</div>
                <div class="metric-subtitle">problems</div>
              </div>
              <div class="metric-card">
                <div class="metric-value" id="averageDaily">0.0</div>
                <div class="metric-label">Daily Average</div>
                <div class="metric-subtitle">problems/day</div>
              </div>
              <div class="metric-card">
                <div class="metric-value" id="maxStreak">0</div>
                <div class="metric-label">Max Streak üî•</div>
                <div class="metric-subtitle">best record</div>
              </div>
            </div>
          </div>

          <!-- GitHub-style Heatmap -->
          <div class="heatmap-container">
            <div class="heatmap-header">
              <h3>Consistency Map üìå</h3>
              <div class="heatmap-legend">
                <span>Less</span>
                <div class="legend-colors">
                  <div class="legend-color level-0"></div>
                  <div class="legend-color level-1"></div>
                  <div class="legend-color level-2"></div>
                  <div class="legend-color level-3"></div>
                  <div class="legend-color level-4"></div>
                </div>
                <span>More</span>
              </div>
            </div>

            <div class="heatmap-content">
              <div class="months-row">
                <!-- Month labels will be generated by JavaScript -->
              </div>
              <div class="heatmap-grid" id="heatmapGrid">
                <!-- Heatmap cells will be generated by JavaScript -->
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal for editing question links -->
    <div class="modal" id="linkModal">
      <div class="modal-content">
        <div class="modal-header">
          <h3 class="modal-title">Edit Question Link</h3>
          <button class="close-modal" id="closeModal">&times;</button>
        </div>
        <div class="modal-body">
          <input
            type="text"
            id="questionTextInput"
            class="modal-input"
            placeholder="Question text"
          />
          <input
            type="url"
            id="questionLinkInput"
            class="modal-input"
            placeholder="https://example.com"
          />
        </div>
        <div class="modal-buttons">
          <button class="modal-btn modal-btn-secondary" id="cancelModal">
            Cancel
          </button>
          <button class="modal-btn modal-btn-primary" id="saveLink">
            Save Link
          </button>
        </div>
      </div>
    </div>

    <script src="js/main.js"></script>

    <!-- Scroll to Top Button -->
    <button class="scroll-to-top" id="scrollToTop" aria-label="Scroll to top">
      ‚Üë
    </button>
  </body>
</html>
